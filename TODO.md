# CCP4/Coot/Privateer Web Assembly
This project is a set of scripts, patches and CMakeLists.txt files which enable the compilation of some of the CCP4 libraries, some of Coot, FFTW2, Privateer and the Gnu Scientific Library to Web Assembly.

### Todo

- [ ] Check that this successfully compiles on Linux
- [ ] Check that this successfully compiles on Windows (needs *get_sources.bat* or *MSYS*)
- [ ] Split coot into library and executables. An almost accurate list can be got from  
    `find checkout/coot-0.9.6/ -name \*.cpp -o -name \*.cc | xargs grep -w main | grep -w int`
  - [x] Identify files containing main
  - [ ] Create rules to build executables.
    - [x] `src/fix-nomenclature.cc`
    - [x] Modify `coot_env.js` so that `fix-nomenclature` can be run from anywhere. Created by cmake.
    - [ ] `auxil/strand-analysis/strand-analysis.cc` (Missing `strand-analysis.hh`?)
    - [x] `auxil/rama/rama-data.cc`
    - [x] `auxil/rama/rama-doughnut.cc`
    - [x] `auxil/catcheck/catcheck.cc`
    - [x] `auxil/vectors/diff-vec.cc`
    - [ ] `auxil/sec-str/sec-str-dist-check.cc` (Namespace issues)
    - [x] `analysis/coot-daca.cc`
    - [x] `analysis/test-cablam.cc`
    - [x] `analysis/test-stats.cc`
    - [x] `analysis/improper-dihedrals.cc`
    - [x] `analysis/test-mogul.cc`
    - [x] `analysis/peptide-projection.cc`
    - [x] `analysis/bfactan.cc`
    - [x] `analysis/test-align.cc`
    - [x] `density-contour/test-occlusion.cc`
    - [x] `ideal/with-geometry.cc`
    - [ ] `ideal/lv.cc` (`coot_optarg` link error)
    - [x] `ideal/test-rama-plot.cc`
    - [ ] `ideal/crankshaft-test.cc` (`coot_optarg` link error, `getopt.cc` needs a patch)
    - [x] `ideal/logramatest.cpp`
    - [x] `ideal/test-indexing.cc`
    - [ ] `ideal/molmantest.cc` (Namespace issues)
    - [ ] `ideal/mini-rsr.cc` (`coot_optarg` link error, `getopt.cc` needs a patch)
    - [x] `tw/tiddly.cc`
    - [x] `utils/test-logging.cc`
    - [x] `db-main/train-pepflip.cc`
    - [ ] `db-main/testdbmain.cc`
    - [ ] `high-res/trace-high-res.cc` (`coot_optarg` link error, `getopt.cc` needs a patch)
    - [x] `high-res/test-atom-graph.cc`
    - [x] `coot-utils/test-spherical.cc`
    - [x] `coot-utils/test-cod-atom-types.cc`
    - [x] `coot-utils/dictionary-atom-types.cc`
    - [x] `coot-utils/test-elastic.cc`
    - [x] `coot-utils/test-convolute.cc`
    - [x] `coot-utils/cod-db-access.cc`
    - [x] `coot-utils/test-5-residue-fragments.cc`
    - [x] `coot-utils/test-hole.cc`
    - [x] `coot-utils/test-glyco-torsions.cc`
    - [x] `coot-utils/test-segmap.cc`
    - [x] `coot-utils/test-h-bonds.cc`
    - [x] `coot-utils/test-morph.cc`
    - [x] `coot-utils/mmrrcc.cc`
    - [x] `coot-utils/test-coot-utils.cc`
    - [x] `coot-utils/test-shelx-reader.cc`
    - [x] `coot-utils/slurp-map.cc`
    - [x] `coot-utils/test-chem-feat.cc`
    - [x] `coot-utils/test-emma.cc`
    - [x] `coot-utils/test-coot-probe.cc`
    - [x] `coords/test-transform.cc`
    - [x] `coords/test-phenix-geo.cc`
    - [x] `geometry/make-shelx-restraints.cc`
    - [ ] `geometry/test-ccp4srs.cc` (`coot_optarg` link error, `getopt.cc` needs a patch)
    - [ ] `geometry/compare-dictionaries.cc` (`coot_optarg` link error, `getopt.cc` needs a patch)
    - [x] `geometry/dictionary-bond-distributions.cc`
    - [x] `geometry/available-comp-id.cc`
    - [x] `geometry/test-read-components.cc`
    - [x] `geometry/test-geometry.cc`
    - [x] `lbg/test-srs-standalone.cc`
    - [x] `lbg/lidia-main.cc`
    - [x] `cootilus/cootilus-demo.cpp`
    - [x] `ligand/ligand-percentiles.cc`
    - [x] `ligand/make-ligands-db.cc`
    - [x] `ligand/test-tube-finder.cc`
    - [ ] `ligand/test-fffear-in-coot.cc` (`coot_optarg` link error, `getopt.cc` needs a patch)
    - [x] `ligand/identify-protein.cc`
    - [x] `ligand/test-ligand.cc`
    - [ ] `ligand/find-waters.cc` (`coot_optarg` link error, `getopt.cc` needs a patch)
    - [ ] `ligand/find-ligand.cc` (`coot_optarg` link error, `getopt.cc` needs a patch)
    - [ ] `ligand/test-trace.cc` (`coot_optarg` link error, `getopt.cc` needs a patch)
    - [ ] `ligand/res-tracer.cc` (Missing `scored-node.hh`?)
    - [x] `ligand/test-side-chain-densities.cc`
    - [x] `cootaneer/cootaneer-demo.cpp`
    - [ ] `src/density-score-by-residue-src.cc` (`coot_optarg` link error, `getopt.cc` needs a patch)
    - [ ] `src/test-chol.cc` (matrix link problems)
    - [ ] `src/align.cc` (`chain_mutation_info_container_t` problems)
- [ ] Modify all relevant `CMakeLists.txt` to use `-sNODERAWFS=1` and `-DNODERAWFS` for executables so that native filesystem is available.
- [ ] Check problem with one Coot source file ligand/res-tracer.cc depends on scored-node.hh which seems not to exist. Fixed in > 0.9.6?
### Done âœ“

- [x] Create my first TODO.md  
- [x] Update README with all changes in README.md.
